// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider          = "mysql"
  url               = env("DATABASE_URL")
}

model User {
  id             Int      @id @default(autoincrement())
  employeeId     String   @unique
  email          String   @unique
  password       String
  name           String?
  prefix         String?
  firstName      String?
  lastName       String?
  age            Int?
  gender         String?
  phone          String?
  birthDate      DateTime?
  address        String?
  subdistrict    String?
  district       String?
  province       String?
  postalCode     String?
  position       String?
  department     String?
  startDate      DateTime?
  endDate        DateTime?
  managerId      String?
  status         String?  @default("Active")
  company        String?
  responsibleArea String?
  type           String  @default("User")
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  role   Role @relation(fields: [roleId], references: [id])
  roleId Int
}

model Role {
  id          Int          @id @default(autoincrement())
  name        String       @unique
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
  users       User[]
  permissions Permission[]
}

model Permission {
  id        Int      @id @default(autoincrement())
  action    String // e.g., 'create', 'read', 'update', 'delete'
  subject   String // e.g., 'user', 'role', 'product'
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  roles     Role[]

  @@unique([action, subject])
}

model Province {
  id       Int      @id
  name_th  String
  amphures Amphure[]
}

model Amphure {
  id          Int       @id
  name_th     String
  province_id Int
  province    Province  @relation(fields: [province_id], references: [id])
  tambons     Tambon[]
}

model Tambon {
  id         Int      @id
  name_th    String
  amphure_id Int
  zip_code   Int?
  amphure    Amphure  @relation(fields: [amphure_id], references: [id])
}
