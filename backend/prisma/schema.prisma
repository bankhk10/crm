// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider          = "mysql"
  url               = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  password  String
  name      String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  role   Role @relation(fields: [roleId], references: [id])
  roleId Int
}

model Role {
  id          Int          @id @default(autoincrement())
  name        String       @unique
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
  users       User[]
  permissions Permission[]
}

model Permission {
  id        Int      @id @default(autoincrement())
  action    String // e.g., 'create', 'read', 'update', 'delete'
  subject   String // e.g., 'user', 'role', 'product'
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  roles     Role[]

  @@unique([action, subject])
}

model Employee {
  employeeId  String    @id
  prefix      String?
  firstName   String?
  lastName    String?
  age         Int?
  gender      String?
  phone       String?
  email       String?
  birthDate   DateTime?
  address     String?
  subdistrict String?
  district    String?
  province    String?
  postalCode  String?
  position    String?
  department  String?
  startDate   DateTime?
  endDate     DateTime?
  managerId   String?
  status      String?
  company     String?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
}
